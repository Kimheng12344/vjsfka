<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Age Estimation</title>
</head>
<body>
  <h1>Age Estimation</h1>
  <input type="file" id="imageInput" accept="image/*">
  <button onclick="estimateAge()">Estimate Age</button>
  <div id="output"></div>

  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/face-api"></script>
<script>
  async function estimateAge() {
    const imageInput = document.getElementById('imageInput');
    const outputDiv = document.getElementById('output');
    outputDiv.innerHTML = '';

    const image = await loadImage(imageInput.files[0]);
    const faceDetection = await faceapi.detectSingleFace(image).withAgeAndGender();
    if (faceDetection) {
      const age = faceDetection.age;
      const gender = faceDetection.gender;

      const p = document.createElement('p');
      p.textContent = `Age: ${age.toFixed(1)} years, Gender: ${gender}`;
      outputDiv.appendChild(p);
    } else {
      const p = document.createElement('p');
      p.textContent = 'No face detected.';
      outputDiv.appendChild(p);
    }
  }

  function loadImage(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.onload = () => {
        const image = new Image();
        image.onload = () => resolve(image);
        image.onerror = (error) => reject(error);
        image.src = reader.result;
      };
      reader.readAsDataURL(file);
    });
  }
</script>
  
</body>
</html>
